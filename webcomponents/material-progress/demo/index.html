<!DOCTYPE html>
<html>
<head>
  <title>material-progress demo</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="msapplication-TileColor" content="#ff5722">
  <meta name="theme-color" content="#ff5722">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../../iron-flex-layout/classes/iron-flex-layout.html">
  <link rel="import" href="../../iron-icons/maps-icons.html">
  <link rel="import" href="../../paper-styles/color.html">
  <link rel="import" href="../../paper-styles/typography.html">
  <link rel="import" href="../material-progress-bars.html">

  <style is="custom-style">
    html,
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
    }
    div.demo-inputs,
    div.demo-inputs > span {
      margin: 8px;
    }
    hr {
      margin-top: 32px;
    }
    p {
      margin: 16px;
    }
    material-progress-bars,
    material-progress-histo {
      margin: 16px;
      @apply(--paper-font-body2);
    }
    material-progress-bars > .bar > span {
      @apply(--layout-flex);
      text-align: end;
      font-size: 0.9em;
    }
    .bar {
      background-color: var(--paper-deep-orange-500);
    }
    .bar.run {
      background-color: var(--paper-purple-500);
    }
    .bar.hello {
      background-color: var(--paper-cyan-500);
    }
    .bar.world {
      background-color: var(--paper-orange-500);
    }
  </style>
  
<body unresolved>

  <template is="dom-bind" id="demo">
    <p>material-progress-bars</p>
    <material-progress-bars id="mpb1" max="128" bar-height="22" animated on-tap="test">
      <div class="bar" data-value="21">
        <iron-icon icon="maps:directions-walk"></iron-icon>
      </div>
      <div class="bar run" data-value="13">
        <iron-icon icon="maps:directions-run"></iron-icon>
      </div>
      <div class="bar hello" data-value="50">
        <iron-icon icon="maps:directions-bike"></iron-icon>
        <span>Hello</span>
      </div>
      <div class="bar world" data-value="30">
        <span>World</span>
      </div>
      <div class="bar" data-value="0">
        <span>Invisible because my data-value="0" !</span>
      </div>
    </material-progress-bars>

    <hr>
    <p>material-progress-bars</p>
    <material-progress-bars id="mpb2" max="100" bar-height="22" bars="{{bars}}" animated legend-label="Legend:">
      <div id="bar1" class="bar" data-value="14" data-legend="bar 1">
        <iron-icon icon="maps:directions-walk"></iron-icon>
        <span>bar 1</span>
      </div>
      <div id="bar2" class="bar run" data-value="9" data-legend="bar 2">
        <iron-icon icon="maps:directions-run"></iron-icon>
        <span>bar 2</span>
      </div>
      <div id="bar3" class="bar hello" data-value="50" data-legend="bar 3">
        <iron-icon icon="maps:directions-bike"></iron-icon>
        <span>bar 3</span>
      </div>
      <div id="bar4" class="bar world" data-value="20" data-legend="bar 4">
        <span>bar 4</span>
      </div>
      <template is="dom-repeat" items="[[mpb2_bars]]">
        <div class="bar" data-value="10" data-legend$="[[item]]">
          <span>[[item]]</span>
        </div>
      </template>
    </material-progress-bars>

    <div class="demo-inputs">
      <span>max: <input id="imax" type="number" value="100" onchange="mpb2InputChange()"></span>
      <span>bar height: <input id="iheight" type="number" value="22" onchange="mpb2InputChange()"></span>
      <span>bars count: [[bars.length]]</span>
      <span>
        <button on-tap="mpb2AddBar">+ Add bar</button>
        <button on-tap="mpb2RemoveBar">- Remove bar</button>
      </span>
    </div>
    <div class="demo-inputs">
      <span>bar1: <input id="ibar1" type="number" value="14" onchange="mpb2InputChange()"></span>
      <span>bar2: <input id="ibar2" type="number" value="9"  onchange="mpb2InputChange()"></span>
      <span>bar3: <input id="ibar3" type="number" value="50" onchange="mpb2InputChange()"></span>
      <span>bar4: <input id="ibar4" type="number" value="20" onchange="mpb2InputChange()"></span>
    </div>

  </template>

  <script>
    var demo = document.querySelector('#demo');

    function mpb2InputChange() {
      var mpb2 = demo.$.mpb2;
      demo.async(function() {
        mpb2.max = Number(demo.$.imax.value);
        mpb2.barHeight = Number(demo.$.iheight.value);
        demo.$.bar1.setAttribute('data-value', Number(demo.$.ibar1.value));
        demo.$.bar2.setAttribute('data-value', Number(demo.$.ibar2.value));
        demo.$.bar3.setAttribute('data-value', Number(demo.$.ibar3.value));
        demo.$.bar4.setAttribute('data-value', Number(demo.$.ibar4.value));
      }, 100);
    }

    demo.mpb2_bars = [];
    demo.mpb2AddBar = function() {
      demo.push('mpb2_bars', 'bar ' + (demo.mpb2_bars.length + 5));
    };

    demo.mpb2RemoveBar = function() {
      if (demo.mpb2_bars.length > 0) {
        var removed = demo.pop('mpb2_bars');
      }
    };
  </script>

</body>
</html>
